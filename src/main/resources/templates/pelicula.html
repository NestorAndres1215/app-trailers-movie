<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{master.html}"
	  class="scroll-smooth">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title th:text="*{titulo} + ' - CinemaTrailer'">Película</title>

	<!-- Tailwind CSS -->
	<script src="https://cdn.tailwindcss.com"></script>

	<!-- Fancybox (solo para popup de trailer) -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">

	<script>
		tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'cinema-red': '#8B0000',
                        'cinema-gold': '#D4AF37',
                        'cinema-dark': '#121212',
                        'cinema-gray': '#1a1a1a',
                    },
                    fontFamily: {
                        'cinzel': ['Cinzel', 'serif'],
                        'montserrat': ['Montserrat', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 1s ease-out',
                        'slide-left': 'slideLeft 0.8s ease-out',
                        'pulse-glow': 'pulseGlow 2s infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        slideLeft: {
                            '0%': { opacity: '0', transform: 'translateX(50px)' },
                            '100%': { opacity: '1', transform: 'translateX(0)' }
                        },
                        pulseGlow: {
                            '0%, 100%': { boxShadow: '0 0 15px rgba(212, 175, 55, 0.3)' },
                            '50%': { boxShadow: '0 0 30px rgba(212, 175, 55, 0.6)' }
                        }
                    }
                }
            }
        }
	</script>

	<style>
		.glass-card {
            background: rgba(26, 26, 26, 0.85);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
        }
        .poster-img {
            transition: all 0.5s ease;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6);
        }
        .poster-img:hover {
            transform: scale(1.03);
            box-shadow: 0 20px 50px rgba(212, 175, 55, 0.4);
        }
        .trailer-btn {
            background: linear-gradient(45deg, #8B0000, #a00);
            transition: all 0.4s ease;
            animation: pulseGlow 2s infinite;
        }
        .trailer-btn:hover {
            background: linear-gradient(45deg, #a00, #8B0000);
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(139, 0, 0, 0.6);
        }
        .badge-genre {
            background: rgba(212, 175, 55, 0.2);
            color: #D4AF37;
            border: 1px solid #D4AF37;
            font-weight: 600;
            padding: 0.4rem 0.8rem;
            border-radius: 50px;
            font-size: 0.85rem;
            transition: all 0.3s ease;
        }
        .badge-genre:hover {
            background: #D4AF37;
            color: #121212;
            transform: scale(1.05);
        }
	</style>
</head>
<body class="bg-cinema-dark text-gray-100 min-h-screen">

<div layout:fragment="content" class="max-w-7xl mx-auto px-4 py-24" th:object="${pelicula}">

	<!-- Contenedor principal -->
	<div class="grid grid-cols-1 lg:grid-cols-2 gap-10 items-start">

		<!-- Póster -->
		<div class="animate-fade-in" style="animation-delay: 0.2s;">
			<img th:src="@{/assets/{filename}(filename=*{rutaPortada})}"
				 th:alt="*{titulo}"
				 class="poster-img w-full object-cover"
				 loading="lazy">
		</div>

		<!-- Información -->
		<div class="space-y-6 animate-slide-left">

			<!-- Botón de Trailer -->
			<div class="text-right">
				<a th:href="@{https://www.youtube.com/watch?v={youtubeId}(youtubeId=*{youtubeTrailerId})}"
				   data-fancybox
				   data-width="800"
				   data-height="450"
				   class="trailer-btn inline-flex items-center gap-3 px-6 py-3 text-white font-bold rounded-full shadow-lg">
					<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 16 16">
						<path d="M8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm1-9H7v6l5-3-5-3z"/>
					</svg>
					Ver Trailer
				</a>
			</div>

			<!-- Título -->
			<h1 class="text-4xl md:text-5xl font-cinzel font-bold">
                <span class="bg-gradient-to-r from-cinema-gold to-yellow-400 bg-clip-text text-transparent"
					  th:text="*{titulo}">Título de la Película</span>
			</h1>

			<!-- Géneros -->
			<div class="flex flex-wrap gap-2">
                <span th:each="genero : *{generos}"
					  class="badge-genre"
					  th:text="${genero.titulo}">Acción</span>
			</div>

			<!-- Fecha de estreno -->
			<div class="flex items-center gap-3 text-gray-300">
				<svg class="w-5 h-5 text-cinema-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
				</svg>
				<span th:text="*{#temporals.format(fechaEstreno, 'dd MMMM yyyy')}">01 Enero 2025</span>
			</div>

			<!-- Sinopsis -->
			<div class="glass-card p-6 mt-6">
				<h3 class="text-xl font-cinzel text-cinema-gold mb-3">Sinopsis</h3>
				<p class="text-gray-300 leading-relaxed" th:text="*{sinopsis}">
					Lorem ipsum dolor sit amet, consectetur adipiscing elit...
				</p>
			</div>

			<!-- Botón volver -->
			<div class="mt-8">
				<a href="/peliculas" class="inline-flex items-center gap-2 text-cinema-gold hover:text-yellow-400 font-medium transition-colors">
					<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
					</svg>
					Volver a películas
				</a>
			</div>
		</div>
	</div>

</div>

<!-- Scripts -->
<script>
	$(document).ready(function() {
        // Fancybox con estilo cinematográfico
        $('[data-fancybox]').fancybox({
            protect: true,
            animationDuration: 600,
            transitionDuration: 800,
            buttons: ['close'],
            infobar: false,
            smallBtn: true,
            toolbar: false,
            youtube: {
                controls: 1,
                showinfo: 0,
                rel: 0,
                modestbranding: 1
            }
        });

        // Animaciones de entrada
        document.querySelectorAll('.animate-fade-in, .animate-slide-left').forEach((el, i) => {
            el.style.opacity = '0';
            setTimeout(() => {
                el.style.opacity = '1';
                if (el.classList.contains('animate-fade-in')) {
                    el.style.animation = 'fadeIn 1s ease-out forwards';
                } else {
                    el.style.animation = 'slideLeft 0.8s ease-out forwards';
                }
            }, i * 200);
        });
    });
</script>

</body>
</html>